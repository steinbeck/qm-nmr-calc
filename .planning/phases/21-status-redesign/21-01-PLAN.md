---
phase: 21-status-redesign
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/qm_nmr_calc/api/static/css/pages/status-page.css
autonomous: true

must_haves:
  truths:
    - "Step tracker component displays completed, active, and pending states with distinct visual styling"
    - "Status badge shows job status with color plus shape indicator (not color only)"
    - "Conformer progress bar uses native progress element with cross-browser styling"
    - "Error card variant available for failed job display"
  artifacts:
    - path: "src/qm_nmr_calc/api/static/css/pages/status-page.css"
      provides: "Step tracker, status badge, conformer progress, error card components"
      contains: ".step-tracker"
  key_links:
    - from: "status-page.css"
      to: "tokens.css"
      via: "@layer components and CSS custom properties"
      pattern: "var\\(--color-"
---

<objective>
Create CSS components for the status page redesign: step tracker, status badge, conformer progress bar, and error card variant.

Purpose: Provide visual components that show job progress with clear state indicators (completed/active/pending), meeting accessibility requirements by using color plus shape (not color only) for status differentiation.

Output: status-page.css with step tracker component, status badge, styled progress bar, error card variant, and responsive mobile layout.
</objective>

<execution_context>
@/home/chris/.claude/get-shit-done/workflows/execute-plan.md
@/home/chris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/21-status-redesign/21-RESEARCH.md

# Existing CSS foundation to build upon
@src/qm_nmr_calc/api/static/css/tokens.css
@src/qm_nmr_calc/api/static/css/components/glass-card.css
@src/qm_nmr_calc/api/static/css/pages/results-page.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create status-page.css with core components</name>
  <files>src/qm_nmr_calc/api/static/css/pages/status-page.css</files>
  <action>
Create status-page.css following the patterns from results-page.css. Include:

1. **Status Header** - Flexbox layout with h1 and status badge, wraps on mobile

2. **Status Badge** - Inline badge using data-status attribute for styling:
   - Add colored dot (::before pseudo-element) PLUS text for accessibility
   - States: queued (gray), running (blue with pulse animation), complete (green), failed (red)
   - Running state dot should have pulse animation

3. **Step Tracker** - Horizontal timeline component:
   - `.step-tracker__list` - flex container with connecting line (::before positioned absolute)
   - `.step-tracker__item` - flex column with icon, label, optional duration
   - `.step-tracker__icon` - 24px circle with state-dependent content:
     - `--complete`: green background, white checkmark (\2713)
     - `--active`: blue background, pulse animation, filled dot (\2022)
     - `--pending`: white background, gray border, empty circle (\25CB)
   - `.step-tracker__label` - step name text
   - `.step-tracker__duration` - elapsed time with tabular-nums

4. **Conformer Progress** - Native progress element styling:
   - `.conformer-progress__header` - flex with stage label and count
   - `.conformer-progress__bar` - styled progress element:
     - appearance: none, -webkit-appearance: none
     - ::-webkit-progress-bar and ::-webkit-progress-value for Chrome/Safari
     - ::-moz-progress-bar for Firefox
   - `.conformer-progress__eta` - estimated time text

5. **Error Card** - Glass card variant:
   - `.glass-card--error` - pink background, red border
   - `.error-icon` - 24px red circle with exclamation mark
   - `.error-message` - error text styling
   - `.error-actions` - button container

6. **Compact Viewer Card** - variant for status page:
   - `.viewer-card--compact` - reduced min-height (250px vs 350px)

7. **Status Footer** - centered text with margin

8. **Conformer Table Status Colors** - Row styling by data-status attribute

9. **Pulse Animation** - @keyframes pulse for running states

All components must:
- Use @layer components wrapper
- Reference design tokens (--color-*, --space-*, --text-*)
- Follow BEM naming convention
- Include mobile responsive rules at bottom (@media max-width: 767px)

See 21-RESEARCH.md "Code Examples" section for complete CSS patterns.
  </action>
  <verify>
File exists at src/qm_nmr_calc/api/static/css/pages/status-page.css with:
- @layer components wrapper
- .step-tracker, .step-tracker__list, .step-tracker__item classes
- .status-badge with data-status attribute selectors
- .conformer-progress__bar with -webkit and -moz pseudo-elements
- .glass-card--error variant
- @keyframes pulse animation
- Mobile breakpoint rules

Run: `grep -c "@layer components" src/qm_nmr_calc/api/static/css/pages/status-page.css` returns 1 or 2
  </verify>
  <done>status-page.css exists with all required components (step tracker, status badge, conformer progress, error card) using design tokens and BEM naming</done>
</task>

<task type="auto">
  <name>Task 2: Add conformer details styling</name>
  <files>src/qm_nmr_calc/api/static/css/pages/status-page.css</files>
  <action>
Append to status-page.css (inside @layer components):

1. **Conformer Details** - collapsible section:
   - `.conformer-details` - margin-top spacing
   - `.conformer-details summary` - cursor pointer, font-weight 500

2. **Conformer Table** - reuse pattern from results-page.css:
   - `.conformer-table` - full width, border-collapse
   - Row status coloring via tr[data-status="..."] selectors:
     - nmr_complete: green text in status column
     - failed: red text in status column
     - optimizing, nmr_running: orange/warning text
   - Use nth-child(2) to target status column specifically

3. **SMILES Code** - styling for long SMILES strings:
   - `.smiles-code` - word-break: break-all, font-size smaller

4. **Muted Text** - ensure .muted class works in context

Verify the mobile responsive section includes:
- Step tracker switches to vertical layout (flex-direction: column)
- Connecting line repositions to left side
- Step items become rows (flex-direction: row)
- Status header stacks vertically
  </action>
  <verify>
Grep for conformer table styling:
`grep -c "data-status" src/qm_nmr_calc/api/static/css/pages/status-page.css` returns >= 3

Grep for mobile responsive:
`grep -c "@media" src/qm_nmr_calc/api/static/css/pages/status-page.css` returns >= 1
  </verify>
  <done>status-page.css includes conformer details/table styling and mobile responsive rules for vertical step tracker</done>
</task>

</tasks>

<verification>
After both tasks complete:

1. CSS file exists and is well-formed:
   ```bash
   wc -l src/qm_nmr_calc/api/static/css/pages/status-page.css
   # Should be 150-250 lines
   ```

2. Key components present:
   ```bash
   grep -E "step-tracker|status-badge|conformer-progress|glass-card--error" src/qm_nmr_calc/api/static/css/pages/status-page.css | wc -l
   # Should be >= 10 lines
   ```

3. Design tokens used (not hardcoded colors):
   ```bash
   grep -c "var(--color-" src/qm_nmr_calc/api/static/css/pages/status-page.css
   # Should be >= 15
   ```

4. Cross-browser progress styling:
   ```bash
   grep -E "webkit-progress|moz-progress" src/qm_nmr_calc/api/static/css/pages/status-page.css | wc -l
   # Should be >= 4
   ```
</verification>

<success_criteria>
- status-page.css created with ~150-250 lines of component CSS
- Step tracker component with complete/active/pending states using color PLUS shape
- Status badge with data-status attribute styling
- Native progress element styled for Chrome, Firefox, Safari
- Error card variant for glass-card
- Mobile responsive rules for vertical step tracker layout
- All styles use design tokens, no hardcoded colors/spacing
</success_criteria>

<output>
After completion, create `.planning/phases/21-status-redesign/21-01-SUMMARY.md`
</output>
