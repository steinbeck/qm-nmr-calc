---
phase: 66-dataset-archive-preparation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - publications/dataset/README.md
  - publications/dataset/PROVENANCE.md
  - publications/dataset/LICENSE
  - publications/dataset/metadata.json
autonomous: true

must_haves:
  truths:
    - "README.md explains dataset scope (50 molecules, 12 B3LYP solvents, 610 calculations), directory structure, citation format, and usage instructions"
    - "PROVENANCE.md documents all non-default computational parameters extracted from actual .out files (NWChem version, COSMO settings, memory, SCF criteria)"
    - "LICENSE contains full CC-BY 4.0 legal text"
    - "metadata.json conforms to DataCite 4.6 schema with all mandatory fields plus SMILES/InChI/InChIKey extensions for 50 molecules"
  artifacts:
    - path: "publications/dataset/README.md"
      provides: "Dataset overview, structure, citation, usage"
      min_lines: 100
    - path: "publications/dataset/PROVENANCE.md"
      provides: "Complete computational provenance"
      min_lines: 60
    - path: "publications/dataset/LICENSE"
      provides: "CC-BY 4.0 license text"
      min_lines: 20
    - path: "publications/dataset/metadata.json"
      provides: "DataCite 4.6 metadata with chemistry extensions"
      min_lines: 50
  key_links:
    - from: "publications/dataset/README.md"
      to: "publications/dataset/calculations/"
      via: "directory structure documentation"
      pattern: "calculations/"
    - from: "publications/dataset/metadata.json"
      to: "publications/dataset/molecules/"
      via: "molecule identifiers in relatedItems"
      pattern: "InChI"
---

<objective>
Create all documentation and metadata files for the dataset archive: README, computational provenance, license, and DataCite metadata.

Purpose: Provide the documentation layer that makes the dataset FAIR-compliant -- findable (DataCite metadata), accessible (README with usage instructions), interoperable (standard identifiers), and reusable (license + provenance).

Output: Four files in publications/dataset/: README.md, PROVENANCE.md, LICENSE, metadata.json
</objective>

<execution_context>
@/home/chris/.claude/get-shit-done/workflows/execute-plan.md
@/home/chris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/66-dataset-archive-preparation/66-RESEARCH.md

Provenance extraction source: Read actual NWChem .out file headers from data/benchmark/results/compound_01/B3LYP_CHCl3/scratch/shielding.out to extract:
- NWChem version (7.2.2)
- Compilation info
- Memory settings
- Number of processors
- Basis set details
- DFT functional
- COSMO settings (dielectric constants per solvent)
- SCF convergence criteria

Key facts for README:
- 610 calculations total (NOT 650 -- vacuum calcs no longer on disk)
- 50 molecules from DELTA50 benchmark set
- 12 solvents with B3LYP/6-311+G(2d,p): CHCl3, DMSO, methanol, water, acetone, benzene, pyridine, THF, toluene, DCM, acetonitrile, DMF
- 10 additional WP04 calculations (compound_01-10, CHCl3 + DMSO only)
- Experimental reference: Grimblat et al., Molecules 2023, 28(6), 2449 (DOI: 10.3390/molecules28062449)
- Geometry optimization: B3LYP/6-31G(d) in vacuo (from literature)
- Shielding: B3LYP/6-311+G(2d,p) with COSMO solvation
- Dataset version: v1.0.0

DataCite 4.6 mandatory fields: identifier, creators, titles, publisher, publicationYear, resourceType.
Additional recommended: subjects, dates, language, descriptions, rightsList, version, relatedIdentifiers.
Chemistry extensions: Include molecule identifiers in subjects or extensions section.

The README should NOT reference the parent project (qm-nmr-calc) as an internal tool -- the dataset is a standalone publication artifact.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extract provenance and write PROVENANCE.md + LICENSE</name>
  <files>
    publications/dataset/PROVENANCE.md
    publications/dataset/LICENSE
  </files>
  <action>
1. **Extract provenance from NWChem output (DATA-04)**:
   - Read `data/benchmark/results/compound_01/B3LYP_CHCl3/scratch/shielding.out` to extract:
     - NWChem version and compilation details (from header)
     - Memory configuration (heap, stack, global)
     - Number of processors
     - Basis set library info
     - COSMO dielectric constant for CHCl3
   - Also read one more .out file (e.g., B3LYP_DMSO) for COSMO dielectric comparison
   - Read a .nw input file to document input template structure
   - Also check for any non-default settings in the NWChem input (SCF direct, convergence thresholds, etc.)

2. **Write PROVENANCE.md**:
   - Title: "Computational Provenance"
   - Sections:
     - Software Environment (NWChem version, compilation, OS/architecture)
     - Hardware (processors, memory allocation from .out)
     - Calculation Protocol (geometry optimization level, shielding calculation level)
     - Basis Set (6-311+G(2d,p), source: NWChem library)
     - DFT Functional (B3LYP with direct SCF for NMR+COSMO)
     - Solvation Model (COSMO with dielectric constants per solvent -- list all 12)
     - Reference Compound (TMS, calculated identically for each solvent)
     - Scaling Factor Derivation (OLS regression with 3-sigma outlier removal)
     - Non-Default Parameters (document `direct` keyword, COSMO grid if non-default, etc.)
     - Reproducibility Notes (how to re-run calculations, NWChem input template)
   - Include actual values extracted from .out files (not placeholders)

3. **Write LICENSE (DATA-06)**:
   - Full CC-BY 4.0 legal text
   - Standard Creative Commons Attribution 4.0 International license
   - Fetch exact text from https://creativecommons.org/licenses/by/4.0/legalcode.txt or use the well-known standard text
  </action>
  <verify>
- `wc -l publications/dataset/PROVENANCE.md` shows 60+ lines
- PROVENANCE.md contains "NWChem" and "7.2.2"
- PROVENANCE.md contains "COSMO" and "dielectric"
- PROVENANCE.md contains "B3LYP" and "6-311+G(2d,p)"
- PROVENANCE.md contains "direct" keyword documentation
- `wc -l publications/dataset/LICENSE` shows 20+ lines
- LICENSE contains "Creative Commons"
  </verify>
  <done>
PROVENANCE.md documents all computational parameters extracted from actual NWChem output files. LICENSE contains CC-BY 4.0 text.
  </done>
</task>

<task type="auto">
  <name>Task 2: Write README.md and metadata.json</name>
  <files>
    publications/dataset/README.md
    publications/dataset/metadata.json
  </files>
  <action>
1. **Write README.md (DATA-03)**:
   - Title: "DELTA50 NMR Benchmark Dataset"
   - Version: v1.0.0
   - Sections:
     - Overview: 610 DFT NMR shielding calculations for 50 organic molecules across 12 solvents using B3LYP/6-311+G(2d,p) with COSMO solvation, plus 10 WP04 calculations
     - Dataset Scope: Molecule count, solvent list, calculation count breakdown (600 B3LYP + 10 WP04)
     - Directory Structure: Tree diagram showing calculations/, molecules/, scaling_factors/, shielding_tensors/, timing/, plus metadata files
     - File Formats: Description of .nw (NWChem input), .out (NWChem output), .csv, .json
     - Molecules: Brief description of DELTA50 set, reference to Grimblat et al.
     - Solvents: Table of 12 solvents with COSMO dielectric constants
     - Scaling Factors: How they were derived, how to use them
     - Usage Instructions:
       - How to read .nw files
       - How to extract shifts from .out files
       - How to apply scaling factors
       - Example Python code snippet for loading data
     - Citation: Formatted citation for the dataset (with placeholder DOI)
     - License: CC-BY 4.0 with link to LICENSE file
     - Related Publications: Placeholder for data descriptor and application note
     - Contact: Placeholder
     - Version History: v1.0.0 initial release

2. **Write metadata.json (DATA-05)**:
   - DataCite 4.6 compliant JSON with:
     - identifier: placeholder DOI (10.xxxxx/xxxxx)
     - creators: placeholder name and affiliation (user will fill)
     - titles: "DELTA50 NMR Benchmark Dataset: DFT Shielding Calculations for 50 Organic Molecules in 12 Solvents"
     - publisher: "RADAR4Chem" (or placeholder)
     - publicationYear: "2026"
     - resourceType: Dataset / Computational Chemistry Dataset
     - subjects: NMR spectroscopy, DFT, chemical shift prediction, DELTA50, B3LYP, COSMO solvation, scaling factors
     - dates: created 2026-02-11
     - language: en
     - descriptions: Abstract describing the dataset content and purpose
     - rightsList: CC-BY 4.0 with URI
     - version: "1.0.0"
     - relatedIdentifiers: Grimblat et al. DOI, placeholder DOIs for data descriptor and app note
     - fundingReferences: placeholder (user will fill)
   - Chemistry extensions section:
     - List all 50 molecules with compound_id, name, SMILES, InChI, InChIKey
     - Read these from data/benchmark/delta50/experimental_shifts.json for names
     - Note: Full identifiers will be added by Plan 01's molecules.json; for now include the structure with molecule names and note identifiers will be populated after archive build
   - Format as pretty-printed JSON (indent=2)
  </action>
  <verify>
- `wc -l publications/dataset/README.md` shows 100+ lines
- README.md contains "DELTA50", "610", "50 molecules", "12 solvents"
- README.md contains "Citation" section with DOI placeholder
- README.md contains directory structure diagram
- `python -c "import json; d=json.load(open('publications/dataset/metadata.json')); print(d['titles'][0]['title'])"` succeeds
- metadata.json contains "identifier", "creators", "titles", "publisher", "publicationYear", "resourceType"
- metadata.json contains "CC-BY-4.0"
- metadata.json contains chemistry extensions with molecule list
  </verify>
  <done>
README.md provides complete dataset documentation with overview, directory structure, usage instructions, and citation format. metadata.json conforms to DataCite 4.6 with all mandatory fields and chemistry extensions.
  </done>
</task>

</tasks>

<verification>
1. `cat publications/dataset/README.md | head -5` shows "DELTA50 NMR Benchmark Dataset"
2. README.md has sections: Overview, Directory Structure, Usage, Citation, License
3. PROVENANCE.md has actual NWChem version extracted from .out files (not placeholder)
4. LICENSE contains "Creative Commons Attribution 4.0"
5. `python -c "import json; json.load(open('publications/dataset/metadata.json'))"` succeeds
6. metadata.json has all 6 DataCite mandatory fields
</verification>

<success_criteria>
- README.md is self-contained: a researcher can understand the dataset without external documentation
- PROVENANCE.md contains real values extracted from NWChem output (version, COSMO params, memory, etc.)
- LICENSE is complete CC-BY 4.0 legal text
- metadata.json passes DataCite 4.6 mandatory field validation
- metadata.json includes chemistry extensions with molecule identifiers
- All files are in publications/dataset/
</success_criteria>

<output>
After completion, create `.planning/phases/66-dataset-archive-preparation/66-02-SUMMARY.md`
</output>
