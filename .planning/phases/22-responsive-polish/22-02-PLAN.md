---
phase: 22-responsive-polish
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/qm_nmr_calc/api/static/css/pages/status-page.css
autonomous: false

must_haves:
  truths:
    - "Users with reduced motion preference see opacity-based pulse animation instead of scale"
    - "Pulse animation on running status badge respects prefers-reduced-motion"
    - "Step tracker active state respects prefers-reduced-motion"
  artifacts:
    - path: "src/qm_nmr_calc/api/static/css/pages/status-page.css"
      provides: "Reduced motion support for animations"
      contains: "prefers-reduced-motion"
  key_links:
    - from: "status-page.css"
      to: "tokens.css"
      via: "CSS custom properties"
      pattern: "var\\(--color"
---

<objective>
Add reduced motion support for status page animations and verify responsive polish across all pages.

Purpose: Ensures status page pulse animations are accessible for users with motion sensitivity, completing WCAG 2.3.3 compliance for all animated elements.

Output: Updated status-page.css with reduced motion alternative animation, visual verification of responsive polish.
</objective>

<execution_context>
@/home/chris/.claude/get-shit-done/workflows/execute-plan.md
@/home/chris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/22-responsive-polish/22-RESEARCH.md

# Source files
@src/qm_nmr_calc/api/static/css/pages/status-page.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add reduced motion support to status page animations</name>
  <files>src/qm_nmr_calc/api/static/css/pages/status-page.css</files>
  <action>
Add reduced motion support for pulse animation in status-page.css:

1. **Add dissolve keyframe animation** after the existing pulse keyframes (after line 371):
   ```css
   /* Dissolve animation for reduced motion - opacity only, no scale */
   @keyframes dissolve {
       0%, 100% { opacity: 1; }
       50% { opacity: 0.5; }
   }
   ```

2. **Add reduced motion media query** after the dissolve keyframes (before the mobile responsive section):
   ```css
   /* ===== Accessibility: Reduced Motion ===== */
   @media (prefers-reduced-motion: reduce) {
       /* Replace pulse with dissolve (opacity-only) */
       .status-badge[data-status="running"]::before {
           animation: dissolve 2s ease-in-out infinite;
       }

       .step-tracker__item--active .step-tracker__icon {
           animation: dissolve 2s ease-in-out infinite;
       }

       /* Remove icon transitions */
       .step-tracker__icon {
           transition: none;
       }
   }
   ```

The dissolve animation uses 2s duration (slightly slower than pulse's 1.5s) for gentler visual feedback.
  </action>
  <verify>
Run: `grep -n "prefers-reduced-motion" src/qm_nmr_calc/api/static/css/pages/status-page.css`
Expected: Line with `@media (prefers-reduced-motion: reduce)`

Run: `grep -n "@keyframes dissolve" src/qm_nmr_calc/api/static/css/pages/status-page.css`
Expected: Line with dissolve keyframes definition
  </verify>
  <done>Status page animations use opacity-based dissolve effect for users with reduced motion preference.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete responsive polish implementation:
- Touch-safe hover states (glass-card.css)
- GPU-accelerated shadow animations (glass-card.css)
- Touch press feedback on mobile (glass-card.css)
- Reduced motion support across all components (glass-card.css, status-page.css)
- Tablet breakpoint token (tokens.css)
  </what-built>
  <how-to-verify>
1. Start development server: `cd /home/chris/develop/qm-nmr-calc && python -m flask --app src/qm_nmr_calc/api/app run --debug`

2. Test hover behavior (desktop):
   - Visit http://127.0.0.1:5000/
   - Hover over interactive cards
   - Verify smooth lift animation with shadow appearing
   - Cards should return smoothly on mouse out

3. Test touch behavior (mobile emulation):
   - Open DevTools -> Toggle device toolbar
   - Select a mobile device (iPhone, Pixel)
   - Tap on interactive cards
   - Verify NO sticky hover state after tap
   - Verify brief press feedback on :active

4. Test reduced motion:
   - Open DevTools -> Rendering panel
   - Enable "Emulate CSS media feature prefers-reduced-motion: reduce"
   - Hover over cards: Should NOT lift (no transform)
   - Shadow transition should still work
   - Visit status page with running job: Pulse should be opacity-based (no scale)

5. Test responsive breakpoints:
   - Resize browser: 320px (mobile) -> 768px (tablet) -> 1024px+ (desktop)
   - Verify gap spacing increases at each breakpoint
   - Verify grid columns: 1 -> 3 -> 6
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any issues found.</resume-signal>
</task>

</tasks>

<verification>
1. CSS syntax validation:
   - No errors in browser DevTools console
   - All CSS files load correctly

2. Animation performance:
   - 60fps during hover transitions (check DevTools Performance)
   - No jank on shadow animation

3. Accessibility:
   - Reduced motion respected for all animations
   - Visual feedback maintained (opacity changes)
</verification>

<success_criteria>
- [ ] status-page.css has @keyframes dissolve
- [ ] status-page.css has @media (prefers-reduced-motion: reduce) block
- [ ] Desktop hover works smoothly with shadow lift
- [ ] Touch devices show press feedback, no sticky hover
- [ ] Reduced motion users see opacity-only animations
- [ ] Tablet breakpoint shows intermediate gap (16px)
- [ ] Human verification approved
</success_criteria>

<output>
After completion, create `.planning/phases/22-responsive-polish/22-02-SUMMARY.md`
</output>
