---
phase: 58-documentation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - data/benchmark/delta50/SCALING-FACTORS.md
  - README.md
autonomous: true

must_haves:
  truths:
    - "SCALING-FACTORS.md main table lists all 14 factor sets (7 solvents x 2 nuclei)"
    - "SCALING-FACTORS.md includes vacuum 1H and vacuum 13C rows with correct statistics"
    - "README states 7 supported solvents and lists all by name"
    - "README Supported Solvents table has 7 entries with correct codes and descriptions"
    - "Every slope, intercept, R-squared, MAE value in SCALING-FACTORS.md matches scaling_factors.json exactly"
    - "SCALING-FACTORS.md notes section accurately describes all solvents using same experimental CDCl3 data"
  artifacts:
    - path: "data/benchmark/delta50/SCALING-FACTORS.md"
      provides: "Complete scaling factor documentation for all 14 factor sets"
      contains: "vacuum"
    - path: "README.md"
      provides: "Updated feature list and solvent table for 7 solvents"
      contains: "benzene"
  key_links:
    - from: "data/benchmark/delta50/SCALING-FACTORS.md"
      to: "src/qm_nmr_calc/data/scaling_factors.json"
      via: "documented values must match JSON values exactly"
      pattern: "-0.9554.*30.545"
    - from: "README.md"
      to: "src/qm_nmr_calc/solvents.py"
      via: "listed solvents must match SUPPORTED_SOLVENTS keys"
      pattern: "methanol.*water.*acetone.*benzene"
---

<objective>
Update SCALING-FACTORS.md and README.md to reflect full 7-solvent support with accurate statistics for all 14 factor sets.

Purpose: Documentation is the final phase of v2.8. Users and contributors need accurate reference docs showing all supported solvents and their calibration quality metrics.

Output: Two updated documentation files with complete, verified solvent information.
</objective>

<execution_context>
@/home/chris/.claude/get-shit-done/workflows/execute-plan.md
@/home/chris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/qm_nmr_calc/data/scaling_factors.json
@src/qm_nmr_calc/solvents.py
@data/benchmark/delta50/SCALING-FACTORS.md
@README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add vacuum factors to SCALING-FACTORS.md and update notes</name>
  <files>data/benchmark/delta50/SCALING-FACTORS.md</files>
  <action>
  First, read `src/qm_nmr_calc/data/scaling_factors.json` and extract the 2 vacuum factor sets:

  - `B3LYP/6-311+G(2d,p)/1H/vacuum`: slope=-0.9554, intercept=30.545, R²=0.9934, MAE=0.148, n=336, outliers=6
  - `B3LYP/6-311+G(2d,p)/13C/vacuum`: slope=-0.9726, intercept=175.711, R²=0.9980, MAE=1.739, n=219, outliers=2

  Then edit `data/benchmark/delta50/SCALING-FACTORS.md`:

  1. **Add 2 vacuum rows to the main table** (lines 26-39). Insert them in alphabetical order by solvent within each nucleus group. The table is currently sorted alphabetically by nucleus then solvent (13C Acetone, 13C Benzene, ..., 1H Acetone, ...). Add:
     - `| 13C | vacuum | -0.9726 (-0.9785, -0.9668) | 175.71 (175.06, 176.36) | 0.9980 | 1.739 | 2.565 | 219 |`
     - `| 1H | vacuum | -0.9554 (-0.9638, -0.9470) | 30.54 (30.30, 30.79) | 0.9934 | 0.148 | 0.193 | 336 |`

     CRITICAL: Round values to match the precision pattern used by existing rows (slope 4 decimal places, intercept 2 decimal places, R² 4 decimal places, MAE 3 decimal places, RMSD 3 decimal places). Pull exact values from the JSON and round consistently.

     Verify each vacuum value against scaling_factors.json:
     - 13C vacuum: slope=-0.9726389627459856 -> -0.9726, intercept=175.71087286822868 -> 175.71, r_squared=0.9980000010868321 -> 0.9980, mae=1.738519488287326 -> 1.739, rmsd=2.5649411248070906 -> 2.565, n_points=219, ci_slope=[-0.9785, -0.9668], ci_intercept=[175.06, 176.36]
     - 1H vacuum: slope=-0.955379905689472 -> -0.9554, intercept=30.544554436892824 -> 30.54, r_squared=0.9933637425927085 -> 0.9934, mae=0.14782086061060187 -> 0.148, rmsd=0.1925499858496684 -> 0.193, n_points=336, ci_slope=[-0.9638, -0.9470], ci_intercept=[30.30, 30.79]

  2. **Also verify ALL 12 existing rows** against scaling_factors.json. Read the JSON, round each value to the same precision as the table, and confirm they match. If any discrepancy is found, fix it.

  3. **Update the Notes section** (lines 827-836). Replace the current notes with:

     ```
     ## Notes

     - **WP04 factors:** Not yet available (benchmark calculations incomplete)
     - **Solvent models:** All solvents use the same experimental chemical shift data
       from the DELTA50 paper (CDCl3 measurements by Grimblat et al. 2023). Solvent
       effects are captured through the COSMO solvation model applied during the DFT
       shielding calculation, not through different experimental references.
     - **Vacuum (gas phase):** Calculated without COSMO solvation model. Same
       experimental CDCl3 reference data.
     - **Outlier removal:** Applied 3-sigma threshold; number removed varies by
       factor set (typically 7 for 1H, 2 for 13C)

     ---

     *Generated by qm_nmr_calc.benchmark.analysis*
     ```

  Do NOT modify anything else in the file (the per-compound statistics tables, regression plots, etc. remain as-is since they only cover the 6 COSMO-derived solvents).
  </action>
  <verify>
  After editing, write a quick Python verification script that:
  1. Reads scaling_factors.json
  2. Reads SCALING-FACTORS.md
  3. For each of the 14 factor sets, extracts the table row values and compares against JSON values (with appropriate rounding tolerance)
  4. Confirms the table has exactly 14 data rows
  5. Prints PASS/FAIL

  Run with: `cd /home/chris/develop/qm-nmr-calc && uv run python /tmp/verify_factors.py`
  Delete the script after verification.
  </verify>
  <done>SCALING-FACTORS.md main table has 14 rows (7 solvents x 2 nuclei) and all values match scaling_factors.json within rounding tolerance. Notes section accurately describes the COSMO methodology and vacuum treatment.</done>
</task>

<task type="auto">
  <name>Task 2: Update README.md for 7-solvent support</name>
  <files>README.md</files>
  <action>
  Edit `README.md` with two changes:

  1. **Line 14** - Update the features bullet from:
     ```
     - **Multiple solvents** including CHCl3, DMSO, and gas phase
     ```
     To:
     ```
     - **7 NMR solvents** including chloroform, DMSO, methanol, water, acetone, benzene, and gas phase
     ```

  2. **Lines 102-108** - Replace the 2-row Supported Solvents table with the full 7-solvent table. Use descriptions from `solvents.py` SUPPORTED_SOLVENTS:

     ```markdown
     ## Supported Solvents

     | Code | Solvent | Use Case |
     |------|---------|----------|
     | `chcl3` | Chloroform (CDCl3) | Standard organic chemistry |
     | `dmso` | DMSO (DMSO-d6) | Polar compounds |
     | `vacuum` | Gas phase (no solvent) | Reference calculations |
     | `methanol` | Methanol (Methanol-d4) | Protic polar solvent |
     | `water` | Water (D2O) | Aqueous samples |
     | `acetone` | Acetone (Acetone-d6) | Medium polarity |
     | `benzene` | Benzene (Benzene-d6) | Aromatic/nonpolar compounds |
     ```

  Do NOT change anything else in README.md.
  </action>
  <verify>
  1. Confirm line 14 mentions "7 NMR solvents": `grep "7 NMR solvents" README.md`
  2. Confirm all 7 solvent codes appear in the table: `grep -c '| \`' README.md` should show the code entries
  3. Run the test suite to ensure nothing is broken: `cd /home/chris/develop/qm-nmr-calc && uv run pytest tests/ -x -q`
  </verify>
  <done>README.md features line says "7 NMR solvents" with all listed. Supported Solvents table has 7 rows matching solvents.py SUPPORTED_SOLVENTS. All tests pass.</done>
</task>

</tasks>

<verification>
1. SCALING-FACTORS.md table has exactly 14 data rows (count lines matching `| 1H |` or `| 13C |` in the table)
2. Vacuum rows present: `grep "vacuum" data/benchmark/delta50/SCALING-FACTORS.md` returns 2+ matches
3. README features line: `grep "7 NMR solvents" README.md` matches
4. README solvent table: `grep -c "benzene\|methanol\|water\|acetone\|vacuum" README.md` shows all 5 new solvents
5. All 434 tests pass: `uv run pytest tests/ -x -q`
6. Python verification script confirms all 14 factor set values match scaling_factors.json
</verification>

<success_criteria>
- SCALING-FACTORS.md lists all 14 factor sets with slope, intercept, R-squared, MAE, and outlier count
- README states 7 supported solvents and lists them by name in both features and table
- Factor statistics in documentation match values in scaling_factors.json exactly (within rounding)
- Notes section accurately describes COSMO methodology for all solvents
- All existing tests continue to pass
</success_criteria>

<output>
After completion, create `.planning/phases/58-documentation/58-01-SUMMARY.md`
</output>
