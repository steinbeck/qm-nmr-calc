---
phase: 18-css-foundation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/qm_nmr_calc/api/static/css/base.css
  - src/qm_nmr_calc/api/static/css/layout.css
autonomous: true

must_haves:
  truths:
    - "Base typography and element styles replace Pico CSS defaults"
    - "Bento grid system supports asymmetric card layouts"
    - "Grid collapses to single column on mobile"
  artifacts:
    - path: "src/qm_nmr_calc/api/static/css/base.css"
      provides: "Element defaults in @layer base"
      contains: "@layer base"
    - path: "src/qm_nmr_calc/api/static/css/layout.css"
      provides: "Bento grid system in @layer layout"
      contains: ".bento-grid"
  key_links:
    - from: "layout.css"
      to: "tokens.css"
      via: "CSS custom properties"
      pattern: "var\\(--bento"
    - from: "base.css"
      to: "tokens.css"
      via: "CSS custom properties"
      pattern: "var\\(--font"
---

<objective>
Create base element styles and the bento grid layout system.

Purpose: Replace Pico CSS defaults with custom base styles and provide the grid system for asymmetric bento layouts. This fulfills the layout requirements for all subsequent page redesigns.

Output: Two CSS files (base.css, layout.css) providing element defaults and grid utilities.
</objective>

<execution_context>
@/home/chris/.claude/get-shit-done/workflows/execute-plan.md
@/home/chris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/18-css-foundation/18-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create base element styles</name>
  <files>
    src/qm_nmr_calc/api/static/css/base.css
  </files>
  <action>
Create `base.css` with element defaults in @layer base. This replaces Pico CSS's base styling.

Include:

**Body defaults:**
- font-family: var(--font-sans)
- font-size: var(--text-base)
- color: var(--color-text)
- background: var(--color-gray-50) -- light gradient background for glass effect visibility
- min-height: 100vh

**Typography:**
- h1 through h6 with appropriate sizes from --text-* scale
- Headings: font-weight: 600, line-height: 1.2
- p: margin-bottom using --space-md
- a: color: var(--color-primary), underline on hover

**Container utility:**
- .container: max-width: 1200px, margin: 0 auto, padding: 0 var(--space-lg)

**Code elements:**
- code, pre: font-family: var(--font-mono)
- code: background: var(--color-gray-100), padding, border-radius
- pre: background: var(--color-gray-900), color: white, padding, overflow-x: auto

**Table styling:**
- Basic table styles with border-collapse
- th: text-align: left, font-weight: 600
- td, th: padding using --space-sm

**Form elements (solid backgrounds for accessibility):**
- input, select, textarea: solid white background, border, padding
- Focus states with outline for accessibility

Keep styles minimal but sufficient to replace Pico CSS defaults. Reference tokens.css for all values.
  </action>
  <verify>
File exists. Contains @layer base block. Uses var(--font-sans) and var(--space-*) tokens.
  </verify>
  <done>
base.css provides element defaults using design tokens, replacing Pico CSS base styles.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create bento grid layout system</name>
  <files>
    src/qm_nmr_calc/api/static/css/layout.css
  </files>
  <action>
Create `layout.css` with the bento grid system in @layer layout.

**Main grid container:**
- .bento-grid: display: grid, grid-template-columns: repeat(6, 1fr), gap: var(--bento-gap)
- .bento-grid--dense: grid-auto-flow: dense (fills gaps with smaller items)

**Grid item base:**
- .bento-grid__item: min-height: 120px, display: flex, flex-direction: column

**Span utilities for asymmetric layouts:**
- .bento-grid__item--span-2: grid-column: span 2
- .bento-grid__item--span-3: grid-column: span 3
- .bento-grid__item--span-4: grid-column: span 4
- .bento-grid__item--span-6: grid-column: span 6 (full width)
- .bento-grid__item--span-row-2: grid-row: span 2

**Feature card (hero position):**
- .bento-grid__item--feature: grid-column: span 2, grid-row: span 2

**Responsive breakpoints:**

Tablet (768px - 1024px):
- Grid becomes 3 columns
- --feature spans 2 columns only

Mobile (max-width: 767px):
- Grid becomes 1 column
- All span utilities reset to grid-column: 1
- Reduced gap

**Page layout helpers:**
- .page-wrapper: wraps main content with padding
- .section: vertical section with margin-bottom

Reference the RESEARCH.md Bento Grid Layout System code example for exact implementation.
  </action>
  <verify>
File exists. Contains @layer layout block. Has .bento-grid and responsive @media queries.
  </verify>
  <done>
layout.css provides 6-column bento grid with responsive collapse to 3-col tablet and 1-col mobile.
  </done>
</task>

</tasks>

<verification>
1. Base styles in layer: `grep "@layer base" src/qm_nmr_calc/api/static/css/base.css`
2. Uses tokens: `grep -c "var(--" src/qm_nmr_calc/api/static/css/base.css` shows 10+ token references
3. Layout in layer: `grep "@layer layout" src/qm_nmr_calc/api/static/css/layout.css`
4. Bento grid classes: `grep ".bento-grid" src/qm_nmr_calc/api/static/css/layout.css` shows grid container and items
5. Responsive queries: `grep -c "@media" src/qm_nmr_calc/api/static/css/layout.css` shows 2+ breakpoints
</verification>

<success_criteria>
- CSS-02 (Cascade Layers): Both files use @layer declarations
- LAYOUT-01: Bento grid uses CSS Grid with asymmetric arrangements
- LAYOUT-02: Grid items support variable sizes (span-2, span-3, feature)
- LAYOUT-03: Consistent gaps using --bento-gap token
- LAYOUT-04: Responsive breakpoints collapse grid on mobile
- Base typography and form styles replace Pico CSS
</success_criteria>

<output>
After completion, create `.planning/phases/18-css-foundation/18-02-SUMMARY.md`
</output>
