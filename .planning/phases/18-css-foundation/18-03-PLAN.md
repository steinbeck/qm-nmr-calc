---
phase: 18-css-foundation
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/qm_nmr_calc/api/static/css/components/glass-card.css
  - src/qm_nmr_calc/api/static/css/utilities.css
autonomous: true

must_haves:
  truths:
    - "Glass card component uses backdrop-filter with Safari prefix"
    - "BEM naming prevents class conflicts (block, element, modifier pattern)"
    - "Glass opacity is 85-95% for WCAG accessibility compliance"
    - "@supports fallback provides solid background for older browsers"
  artifacts:
    - path: "src/qm_nmr_calc/api/static/css/components/glass-card.css"
      provides: "Glassmorphic card component with BEM variants"
      contains: ".glass-card"
    - path: "src/qm_nmr_calc/api/static/css/utilities.css"
      provides: "Utility classes in @layer utilities"
      contains: "@layer utilities"
  key_links:
    - from: "glass-card.css"
      to: "Safari compatibility"
      via: "-webkit-backdrop-filter prefix"
      pattern: "-webkit-backdrop-filter"
    - from: "glass-card.css"
      to: "tokens.css"
      via: "CSS custom properties"
      pattern: "var\\(--glass"
---

<objective>
Create the glassmorphic card component with BEM variants and utility classes.

Purpose: Deliver the reusable glass card component that all page redesigns will use. This is the core visual component of the design system, featuring backdrop-filter blur, Safari compatibility, and accessibility-first opacity values.

Output: Glass card component (glass-card.css) and utility classes (utilities.css) ready for use in templates.
</objective>

<execution_context>
@/home/chris/.claude/get-shit-done/workflows/execute-plan.md
@/home/chris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/18-css-foundation/18-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create glass card component with BEM structure</name>
  <files>
    src/qm_nmr_calc/api/static/css/components/glass-card.css
  </files>
  <action>
Create `glass-card.css` in @layer components with the full glassmorphic card component.

**Block: .glass-card**
- background: var(--glass-bg-light) -- 85% opacity for accessibility
- backdrop-filter: var(--glass-blur-medium)
- -webkit-backdrop-filter: blur(12px) -- LITERAL VALUE for Safari (no variables!)
- border: var(--glass-border) -- 1px solid hsl(0 0% 100% / 0.3)
- border-radius: var(--glass-radius)
- box-shadow: var(--glass-shadow)
- padding: var(--space-lg)
- transition: transform var(--transition-base), box-shadow var(--transition-base)

**Elements (BEM double underscore):**
- .glass-card__header: margin-bottom, padding-bottom, border-bottom separator
- .glass-card__title: font-size: var(--text-2xl), font-weight: 600, margin: 0
- .glass-card__body: color: var(--color-text), line-height: 1.6
- .glass-card__footer: margin-top, padding-top, border-top separator

**Modifiers (BEM double hyphen):**
- .glass-card--subtle: higher opacity (95%), lighter blur (8px)
- .glass-card--featured: medium opacity (90%), stronger shadow, 2px border
- .glass-card--elevated: enhanced shadow for prominent cards
- .glass-card--interactive: adds hover effects (only on hover: hover media query)

**Interactive hover (desktop only):**
```css
@media (hover: hover) {
    .glass-card--interactive:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 48px hsl(0 0% 0% / 0.2);
    }
}
```

**@supports fallback for browsers without backdrop-filter:**
```css
@supports not (backdrop-filter: blur(1px)) {
    .glass-card {
        background: hsl(0 0% 100% / 0.95);  /* Solid fallback */
    }
}
```

**Accessibility: prefers-reduced-transparency:**
```css
@media (prefers-reduced-transparency: reduce) {
    .glass-card {
        backdrop-filter: none;
        -webkit-backdrop-filter: none;
        background: hsl(0 0% 100%);
    }
}
```

CRITICAL: Safari -webkit-backdrop-filter requires literal blur values (e.g., blur(12px)), not CSS variables. Always duplicate the backdrop-filter line with -webkit- prefix using literal values.

Reference the RESEARCH.md "Complete Glassmorphic Card Component" code example.
  </action>
  <verify>
File exists. Contains -webkit-backdrop-filter with literal value. Contains @supports fallback. Contains BEM classes (.glass-card__header, .glass-card--featured).
  </verify>
  <done>
glass-card.css provides reusable glassmorphic card with BEM variants, Safari compatibility, and accessibility fallbacks.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create utility classes</name>
  <files>
    src/qm_nmr_calc/api/static/css/utilities.css
  </files>
  <action>
Create `utilities.css` in @layer utilities (highest priority layer).

**Text utilities:**
- .text-center, .text-right, .text-left
- .text-muted: color: var(--color-text-muted)
- .text-sm, .text-lg, .text-xl (font-size utilities)
- .font-mono: font-family: var(--font-mono)

**Spacing utilities:**
- .mt-0, .mt-sm, .mt-md, .mt-lg, .mt-xl (margin-top)
- .mb-0, .mb-sm, .mb-md, .mb-lg, .mb-xl (margin-bottom)
- .p-md, .p-lg (padding all sides)

**Display utilities:**
- .hidden: display: none
- .flex: display: flex
- .flex-center: display: flex, align-items: center, justify-content: center
- .flex-between: display: flex, justify-content: space-between, align-items: center

**Width utilities:**
- .w-full: width: 100%

**Visibility utilities:**
- .sr-only: screen reader only (visually hidden but accessible)

**Reduced motion support:**
```css
@media (prefers-reduced-motion: reduce) {
    .transition-none,
    * {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
    }
}
```

Keep utilities minimal and focused. These are helpers, not a full utility framework.
  </action>
  <verify>
File exists. Contains @layer utilities block. Has .text-center and .sr-only classes.
  </verify>
  <done>
utilities.css provides essential utility classes in highest-priority layer.
  </done>
</task>

</tasks>

<verification>
1. Glass card in components layer: `grep "@layer components" src/qm_nmr_calc/api/static/css/components/glass-card.css`
2. Safari prefix present: `grep -c "\-webkit-backdrop-filter" src/qm_nmr_calc/api/static/css/components/glass-card.css` shows 3+ occurrences
3. BEM elements: `grep ".glass-card__" src/qm_nmr_calc/api/static/css/components/glass-card.css` shows header, title, body, footer
4. BEM modifiers: `grep ".glass-card--" src/qm_nmr_calc/api/static/css/components/glass-card.css` shows subtle, featured, elevated
5. @supports fallback: `grep "@supports" src/qm_nmr_calc/api/static/css/components/glass-card.css`
6. Utilities layer: `grep "@layer utilities" src/qm_nmr_calc/api/static/css/utilities.css`
7. Reduced motion: `grep "prefers-reduced-motion" src/qm_nmr_calc/api/static/css/utilities.css`
</verification>

<success_criteria>
- CSS-03 (BEM naming): .glass-card, .glass-card__header, .glass-card--featured pattern
- GLASS-01: backdrop-filter blur effect (8-12px)
- GLASS-02: 85-95% opacity for accessibility
- GLASS-03: Subtle border highlight (1px light border)
- GLASS-04: Safari -webkit-backdrop-filter prefix with literal values
- GLASS-05: Multiple intensity levels via modifiers (--subtle, --featured, --elevated)
- GLASS-06: Box shadows for elevation
- A11Y-03: prefers-reduced-motion support in utilities
</success_criteria>

<output>
After completion, create `.planning/phases/18-css-foundation/18-03-SUMMARY.md`
</output>
