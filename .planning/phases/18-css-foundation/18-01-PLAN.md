---
phase: 18-css-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/qm_nmr_calc/api/static/css/layers.css
  - src/qm_nmr_calc/api/static/css/reset.css
  - src/qm_nmr_calc/api/static/css/tokens.css
autonomous: true

must_haves:
  truths:
    - "CSS layer order declaration exists and loads first"
    - "Design tokens define colors, spacing, glass effects, and transitions"
    - "Mobile performance tokens reduce blur values for GPU efficiency"
  artifacts:
    - path: "src/qm_nmr_calc/api/static/css/layers.css"
      provides: "@layer order declaration (reset, base, layout, components, utilities)"
      contains: "@layer reset, base, layout, components, utilities"
    - path: "src/qm_nmr_calc/api/static/css/reset.css"
      provides: "Minimal reset in @layer reset"
      contains: "@layer reset"
    - path: "src/qm_nmr_calc/api/static/css/tokens.css"
      provides: "CSS custom properties for design system"
      contains: "--glass-blur"
  key_links:
    - from: "layers.css"
      to: "all other CSS files"
      via: "layer order declaration"
      pattern: "@layer reset, base, layout, components, utilities"
---

<objective>
Create the CSS architecture foundation with cascade layer declarations and design tokens.

Purpose: Establish the explicit layer priority system that all subsequent CSS files depend on. This is the foundation of the CSS architecture - layers.css MUST be loaded first to establish priority order.

Output: Three CSS files that form the architectural foundation (layers.css, reset.css, tokens.css) ready for base.html integration.
</objective>

<execution_context>
@/home/chris/.claude/get-shit-done/workflows/execute-plan.md
@/home/chris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/18-css-foundation/18-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CSS directory structure and layers declaration</name>
  <files>
    src/qm_nmr_calc/api/static/css/layers.css
  </files>
  <action>
Create the CSS directory structure if needed (static/css/ already exists but may need components/ subdirectory).

Create `layers.css` with the cascade layer order declaration. This file MUST:
1. Declare layer order: @layer reset, base, layout, components, utilities
2. Include comment explaining this file must load first
3. Be minimal - only the layer declaration, nothing else

This is the architectural keystone - all other CSS files will place their styles into these layers, and priority is determined by this declaration order.
  </action>
  <verify>
File exists at src/qm_nmr_calc/api/static/css/layers.css and contains @layer declaration.
  </verify>
  <done>
layers.css declares the 5-layer cascade order (reset, base, layout, components, utilities).
  </done>
</task>

<task type="auto">
  <name>Task 2: Create minimal reset and design tokens</name>
  <files>
    src/qm_nmr_calc/api/static/css/reset.css
    src/qm_nmr_calc/api/static/css/tokens.css
  </files>
  <action>
Create `reset.css` with minimal CSS reset in @layer reset:
- box-sizing: border-box for all elements
- Remove default margins on body
- Set line-height: 1.5 on body
- Keep reset minimal - Pico CSS was handling this before

Create `tokens.css` with CSS custom properties for the design system. This file is NOT layered (custom properties work globally). Include:

**Glass tokens:**
- --glass-blur-light: blur(8px)
- --glass-blur-medium: blur(12px)
- --glass-blur-heavy: blur(16px)
- --glass-bg-light: hsl(0 0% 100% / 0.85)
- --glass-bg-medium: hsl(0 0% 100% / 0.90)
- --glass-bg-subtle: hsl(0 0% 100% / 0.95)
- --glass-border: 1px solid hsl(0 0% 100% / 0.3)
- --glass-shadow: 0 8px 32px hsl(0 0% 0% / 0.1)
- --glass-radius: 1rem

**Spacing scale:**
- --space-xs through --space-2xl (0.25rem to 3rem)

**Bento grid:**
- --bento-cols: 6
- --bento-gap: 1rem

**Typography:**
- --font-sans: system font stack
- --font-mono: monospace font stack
- --text-xs through --text-2xl

**Colors:**
- --color-text, --color-text-muted, --color-border
- --color-primary, --color-primary-hover (use existing blue from Pico theme)

**Transitions:**
- --transition-fast: 150ms ease
- --transition-base: 250ms ease

**Mobile media query (max-width: 768px):**
- Reduce glass blur values (6px, 8px, 10px instead of 8px, 12px, 16px)
- Set --bento-cols: 1
- Reduce --bento-gap to 0.75rem

Reference the RESEARCH.md Code Examples section for exact values and structure.
  </action>
  <verify>
Both files exist. reset.css contains @layer reset block. tokens.css contains :root with --glass-blur and --space custom properties.
  </verify>
  <done>
reset.css provides minimal reset in layer. tokens.css defines all design tokens with mobile overrides.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create components subdirectory</name>
  <files>
    src/qm_nmr_calc/api/static/css/components/.gitkeep
  </files>
  <action>
Create the components subdirectory at src/qm_nmr_calc/api/static/css/components/

Add a .gitkeep file to ensure the directory is tracked (will be populated with glass-card.css in Plan 18-03).

This prepares the file structure for the component CSS files that follow.
  </action>
  <verify>
Directory exists: ls src/qm_nmr_calc/api/static/css/components/
  </verify>
  <done>
Components subdirectory exists for modular component CSS files.
  </done>
</task>

</tasks>

<verification>
1. Layer declaration file: `cat src/qm_nmr_calc/api/static/css/layers.css` shows @layer reset, base, layout, components, utilities
2. Reset in layer: `grep "@layer reset" src/qm_nmr_calc/api/static/css/reset.css` finds the layer block
3. Design tokens exist: `grep -c "^--" src/qm_nmr_calc/api/static/css/tokens.css` shows 20+ custom properties
4. Mobile tokens: `grep "@media" src/qm_nmr_calc/api/static/css/tokens.css` shows responsive overrides
5. Directory structure: `ls src/qm_nmr_calc/api/static/css/` shows layers.css, reset.css, tokens.css, components/
</verification>

<success_criteria>
- CSS-02 (Cascade Layers): Layer order declared in layers.css
- LAYOUT-06 (Design Tokens): tokens.css defines colors, spacing, glass effects as custom properties
- Mobile performance: tokens.css reduces blur values for mobile via @media query
- File structure matches research recommendation
</success_criteria>

<output>
After completion, create `.planning/phases/18-css-foundation/18-01-SUMMARY.md`
</output>
