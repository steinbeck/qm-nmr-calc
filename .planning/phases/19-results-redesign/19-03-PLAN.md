---
phase: 19-results-redesign
plan: 03
type: execute
wave: 3
depends_on: ["19-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "3D molecular viewer displayed in hero card position (largest, most prominent)"
    - "1H and 13C spectrum images displayed in medium-sized cards with clear labels"
    - "Ensemble metadata displayed in dedicated card for ensemble jobs"
    - "Chemical shift tables organized in cards with right-aligned numbers"
    - "Download buttons grouped in compact card with clear affordances"
    - "Calculation details visible in metadata card"
    - "Conformer selector integrated with 3D viewer card (ensemble jobs only)"
  artifacts: []
  key_links: []
---

<objective>
Visually verify the results page redesign meets all requirements.

Purpose: Human verification ensures the bento layout looks correct, 3D viewer is functional, and all interactive elements work as expected. Catches visual issues that automated tests cannot.

Output: Verified working results page or list of issues to fix.
</objective>

<execution_context>
@/home/chris/.claude/get-shit-done/workflows/execute-plan.md
@/home/chris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/19-results-redesign/19-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Start development server</name>
  <files></files>
  <action>
Start the development server if not already running:

```bash
cd /home/chris/develop/qm-nmr-calc
# Check if server is running
curl -s http://localhost:8000/health || uvicorn qm_nmr_calc.api.main:app --host 0.0.0.0 --port 8000 &
```

Wait for server to be ready.
  </action>
  <verify>
`curl -s http://localhost:8000/health` returns JSON with status
  </verify>
  <done>
Development server running and responding to health checks.
  </done>
</task>

<task type="auto">
  <name>Task 2: Identify test job for verification</name>
  <files></files>
  <action>
Find an existing completed job to use for visual verification. Check jobs directory:

```bash
ls -la /home/chris/develop/qm-nmr-calc/jobs/ | head -20
```

Look for a job with status "complete". If no completed jobs exist, note that a new job will need to be submitted.

For ensemble job testing, check for jobs with `conformer_mode: ensemble` in their job.json.
  </action>
  <verify>
At least one completed job ID identified for testing, or instructions provided for submitting test job.
  </verify>
  <done>
Test job ID(s) identified: one single-conformer job and (if available) one ensemble job.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Results page redesign with bento grid layout:
- 3D molecular viewer in hero position (span-4, 2-row height)
- 1H and 13C spectrum cards side by side (span-2 each)
- Ensemble metadata card (ensemble jobs only)
- Calculation details card
- 1H and 13C shift table cards
- Downloads card (full width)
  </what-built>
  <how-to-verify>
**Test with Single-Conformer Job:**
1. Navigate to: http://localhost:8000/results/{job_id} (use identified job ID)
2. Verify layout:
   - [ ] 3D viewer is prominently displayed on left (largest card)
   - [ ] 3D viewer has white background (not glass/transparent)
   - [ ] Spectrum images are side by side on the right
   - [ ] Calculation Details card shows preset, solvent, functional, basis set
   - [ ] 1H Shifts table has right-aligned numbers
   - [ ] 13C Shifts table has right-aligned numbers
   - [ ] Downloads card spans full width at bottom
3. Test interactivity:
   - [ ] 3D viewer rotates when clicked and dragged
   - [ ] 3D viewer zooms with scroll wheel
   - [ ] Shift labels visible on atoms (blue for H, orange for C)
   - [ ] Clicking spectrum image opens modal
   - [ ] Modal closes when clicking outside or X button
   - [ ] Download buttons are clickable and functional
4. Check NO ensemble elements appear:
   - [ ] No "Ensemble Summary" card visible
   - [ ] No conformer dropdown in 3D viewer header

**Test with Ensemble Job (if available):**
5. Navigate to: http://localhost:8000/results/{ensemble_job_id}
6. Verify ensemble-specific elements:
   - [ ] Conformer selector dropdown appears in 3D viewer header
   - [ ] Ensemble Summary card appears with:
     - Conformers Used count
     - Total Generated count
     - Method (RDKit KDG or CREST/xTB)
     - Temperature
     - Energy Range
     - Top Contributors table
   - [ ] Legend shows "averaged shifts" text
   - [ ] Note about Boltzmann averaging appears below viewer
7. Test conformer switching:
   - [ ] Dropdown lists all conformers with energy and population
   - [ ] Selecting different conformer updates 3D geometry
   - [ ] Shift labels remain (showing averaged values)

**Responsive Check (resize browser):**
8. Tablet width (~900px):
   - [ ] 3D viewer takes full width
   - [ ] Cards reorganize into narrower columns
9. Mobile width (~400px):
   - [ ] All cards stack vertically
   - [ ] 3D viewer still usable (rotates, zooms)
   - [ ] Download buttons have adequate touch targets

**Browser Console:**
10. Open DevTools (F12) -> Console tab
    - [ ] No JavaScript errors
    - [ ] No 404 errors for CSS/images
  </how-to-verify>
  <resume-signal>
Type "approved" if all checks pass, or describe specific issues that need fixing (e.g., "3D viewer collapsed", "shift tables empty", "conformer selector not appearing").
  </resume-signal>
</task>

</tasks>

<verification>
Visual verification covers all 7 phase requirements:
1. RESULTS-01: 3D molecular viewer in hero card position (largest, prominent)
2. RESULTS-02: 1H and 13C spectrum images in medium cards
3. RESULTS-03: Ensemble metadata displayed in dedicated card (ensemble jobs)
4. RESULTS-04: Chemical shift tables in organized card layout
5. RESULTS-05: Download buttons grouped in compact card
6. RESULTS-06: Calculation details (solvent, functional, basis set) visible
7. RESULTS-07: Conformer selector integrated with 3D viewer card (ensemble jobs only)
</verification>

<success_criteria>
- All visual checks pass for single-conformer job
- All visual checks pass for ensemble job (if available)
- Responsive layout works at tablet and mobile widths
- No JavaScript console errors
- All interactive elements functional
</success_criteria>

<output>
After completion, create `.planning/phases/19-results-redesign/19-03-SUMMARY.md`
</output>
