---
phase: 23-accessibility-testing
plan: 02
type: execute
wave: 2
depends_on: ["23-01"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All text on glass backgrounds meets WCAG 4.5:1 contrast ratio"
    - "Keyboard navigation works for all interactive elements"
    - "Reduced motion support disables transform animations"
    - "Mobile performance Lighthouse score is 90+"
    - "Safari displays glassmorphism correctly with webkit prefix"
  artifacts: []
  key_links: []
---

<objective>
Validate WCAG compliance, cross-browser compatibility, and mobile performance

Purpose: Phase 23 success criteria require formal validation of accessibility, performance, and cross-browser support. Automated implementation is complete - this plan validates everything works correctly.

Output: Verified compliance with all Phase 23 success criteria
</objective>

<execution_context>
@/home/chris/.claude/get-shit-done/workflows/execute-plan.md
@/home/chris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/23-accessibility-testing/23-RESEARCH.md

# Prior plan summary
@.planning/phases/23-accessibility-testing/23-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify reduced motion implementation</name>
  <files></files>
  <action>
Verify existing reduced motion support in the codebase:

1. Check glass-card.css has @media (prefers-reduced-motion: reduce):
   - Disables transform on hover
   - Keeps opacity transitions

2. Check status-page.css has @media (prefers-reduced-motion: reduce):
   - Replaces pulse animation with dissolve (opacity-only)
   - Applies to status-badge and step-tracker

3. Run grep to confirm:
   ```bash
   grep -r "prefers-reduced-motion" src/qm_nmr_calc/api/static/css/
   ```

   Expected: glass-card.css, status-page.css both have the media query

Document findings: A11Y-03 is implemented correctly.
  </action>
  <verify>grep shows prefers-reduced-motion in glass-card.css and status-page.css</verify>
  <done>Reduced motion implementation verified in both files</done>
</task>

<task type="auto">
  <name>Task 2: Verify mobile blur reduction</name>
  <files></files>
  <action>
Check tokens.css mobile overrides:

1. Verify @media (max-width: 768px) reduces blur values:
   - --glass-blur-light: blur(6px) (reduced from 8px)
   - --glass-blur-medium: blur(8px) (reduced from 12px)
   - --glass-blur-heavy: blur(10px) (reduced from 16px)

2. Run grep:
   ```bash
   grep -A5 "max-width: 768px" src/qm_nmr_calc/api/static/css/tokens.css
   ```

Document findings: A11Y-04 mobile performance optimization is implemented.
  </action>
  <verify>grep shows reduced blur values in mobile media query</verify>
  <done>Mobile blur reduction verified in tokens.css</done>
</task>

<task type="auto">
  <name>Task 3: Verify Safari webkit backdrop-filter</name>
  <files></files>
  <action>
Check that Safari webkit prefix uses literal values (not CSS variables):

1. Check glass-card.css:
   ```bash
   grep "webkit-backdrop-filter" src/qm_nmr_calc/api/static/css/components/glass-card.css
   ```

   Expected:
   - -webkit-backdrop-filter: blur(12px); (base card)
   - -webkit-backdrop-filter: blur(8px); (subtle variant)

   WRONG: -webkit-backdrop-filter: var(--glass-blur-medium);

2. Verify each .glass-card modifier has literal webkit value.

Document findings for cross-browser compliance.
  </action>
  <verify>grep shows -webkit-backdrop-filter with literal blur values (not CSS variables)</verify>
  <done>Safari webkit prefix uses literal values in all glass-card variants</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Phase 23 implements:
1. Focus indicators for keyboard navigation (Plan 23-01)
2. Reduced motion support (prefers-reduced-motion)
3. Mobile blur reduction for performance
4. Safari webkit backdrop-filter compatibility
5. High opacity glass (85-95%) for WCAG contrast
  </what-built>
  <how-to-verify>
**A. Contrast Validation (A11Y-01):**
1. Open WebAIM Contrast Checker: https://webaim.org/resources/contrastchecker/
2. Test text color (#262a2e) against glass background (#ffffff at 85-95% opacity over gray-50)
   - Effective background is near-white
   - Contrast ratio should be > 4.5:1

**B. Keyboard Navigation (A11Y-02, A11Y-05):**
1. Start dev server: `cd /home/chris/develop/qm-nmr-calc && uv run flask run --port=8001`
2. Open http://localhost:8001 in browser
3. Press Tab repeatedly to navigate through page
4. Verify:
   - Each interactive element (links, buttons, inputs, summary) shows blue focus ring
   - Tab order follows visual layout (left-to-right, top-to-bottom)
   - No keyboard traps (can always Tab out)
5. Test on Submit, Status, and Results pages

**C. Reduced Motion (A11Y-03):**
1. In Chrome DevTools: Rendering panel > Emulate CSS media feature "prefers-reduced-motion: reduce"
2. Go to Status page with a running job
3. Verify: Status badge dot uses gentle fade (dissolve) instead of scale pulse
4. Verify: Hover on glass cards does NOT lift/translate

**D. Mobile Performance (A11Y-04):**
1. Open Chrome DevTools > Lighthouse
2. Select "Mobile" device
3. Run Performance audit
4. Verify score is 90+ (or document actual score)

**E. Cross-Browser (Success Criteria 5):**
1. If Safari available: Open site and verify glass cards have blur effect
2. If BrowserStack available: Test Safari macOS + iOS
3. At minimum: Confirm Firefox and Chrome both show glassmorphism

Report any issues found.
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
All Phase 23 success criteria validated:
1. WCAG 4.5:1 contrast - Validated with WebAIM
2. Keyboard navigation - Tested with Tab key
3. Reduced motion - Verified with DevTools emulation
4. Mobile performance - Lighthouse 90+ score
5. Cross-browser - Safari webkit backdrop-filter works
</verification>

<success_criteria>
- User confirms contrast ratio meets 4.5:1
- User confirms keyboard navigation works on all pages
- User confirms reduced motion disables transform animations
- User confirms Lighthouse mobile performance score 90+
- User confirms Safari displays glassmorphism correctly
</success_criteria>

<output>
After completion, create `.planning/phases/23-accessibility-testing/23-02-SUMMARY.md`
</output>
