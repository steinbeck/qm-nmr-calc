# Milestone v2.8: Expanded Solvent Support

**Status:** SHIPPED 2026-02-09
**Phases:** 54-58
**Total Plans:** 6

## Overview

Add 4 new NMR solvents (methanol, water, acetone, benzene) with DELTA50-derived B3LYP scaling factors. This extends solvent coverage from 3 to 7, following the same benchmark-derive-integrate pipeline established in v1.1 but now applied to 4 solvents in parallel. The compute-intensive benchmark phase (200 NWChem calculations) dominates the timeline.

## Phases

### Phase 54: Benchmark Infrastructure

**Goal**: Benchmark tooling accepts all 4 new solvents so calculations can be dispatched
**Depends on**: Nothing (first phase of v2.8)
**Requirements**: BENCH-01, INTG-05
**Plans**: 1 plan

Plans:
- [x] 54-01-PLAN.md -- Extend benchmark CLI and NWChem input generation for 4 new solvents

**Success Criteria:**
1. Benchmark CLI accepts Methanol, Water, Acetone, Benzene as solvents
2. NWChem COSMO input files contain correct solvent parameters
3. Benzene added to input_gen.py SUPPORTED_SOLVENTS

**Completed:** 2026-02-07

### Phase 55: DELTA50 Benchmark Calculations

**Goal**: All 200 NWChem benchmark calculations complete successfully (50 molecules x 4 solvents)
**Depends on**: Phase 54
**Requirements**: BENCH-02, BENCH-03, BENCH-04, BENCH-05
**Plans**: 2 plans

Plans:
- [x] 55-01-PLAN.md -- Run DELTA50 benchmarks for Methanol and Water solvents (100 calculations)
- [x] 55-02-PLAN.md -- Run DELTA50 benchmarks for Acetone and Benzene solvents (100 calculations)

**Success Criteria:**
1. 50 completed NWChem output files per solvent with NMR shielding tensors
2. No COSMO convergence errors across all 200 calculations

**Completed:** 2026-02-08

### Phase 56: Scaling Factor Derivation

**Goal**: OLS-derived scaling factors for all 4 new solvents pass quality gates and are stored in package data
**Depends on**: Phase 55
**Requirements**: BENCH-06, VALID-01, VALID-02, VALID-03
**Plans**: 1 plan

Plans:
- [x] 56-01-PLAN.md -- Derive scaling factors, validate quality gates, update package data

**Success Criteria:**
1. 8 new factor sets (4 solvents x 2 nuclei) with RÂ² > 0.99
2. 1H MAE below 0.2 ppm per solvent
3. 13C MAE below 3.0 ppm per solvent
4. scaling_factors.json contains 14 total factor sets

**Completed:** 2026-02-09

### Phase 57: Solvent Integration

**Goal**: Users can select any of the 4 new solvents in the web UI and API and get accurate NMR predictions
**Depends on**: Phase 56
**Requirements**: INTG-01, INTG-02, INTG-03, INTG-04, INTG-06
**Plans**: 1 plan

Plans:
- [x] 57-01-PLAN.md -- Add 4 solvents to solvents.py, shifts.py, nmredata.py, and update tests

**Success Criteria:**
1. API accepts methanol, water, acetone, benzene solvents with correct scaling factors
2. Web UI dropdown lists all 7 solvents
3. Existing CHCl3, DMSO, vacuum calculations unchanged

**Completed:** 2026-02-09

### Phase 58: Documentation

**Goal**: Documentation reflects 7-solvent support with accuracy statistics for each solvent
**Depends on**: Phase 57
**Requirements**: DOCS-01, DOCS-02
**Plans**: 1 plan

Plans:
- [x] 58-01-PLAN.md -- Update SCALING-FACTORS.md and README for 7-solvent support

**Success Criteria:**
1. SCALING-FACTORS.md lists all 14 factor sets
2. README states 7 supported solvents
3. Factor statistics match scaling_factors.json exactly

**Completed:** 2026-02-09

---

## Milestone Summary

**Key Decisions:**

- Only benzene needed in input_gen SUPPORTED_SOLVENTS (water, acetone, methanol already present)
- Title-case solvent names in scaling_factors.json keys (matching existing convention)
- Added 'direct' to DFT shielding input for CPHF convergence with COSMO
- Set NWChem cwd to scratch dir for file isolation between sequential calculations
- Merge strategy: 12 newly derived + 2 vacuum factors from Phase 11.2
- Deuterated display names follow NMR convention (Methanol-d4, D2O, Acetone-d6, Benzene-d6)
- NMReData solvent names use standard forms (CD3OD, D2O, (CD3)2CO, C6D6)
- Vacuum displayed as "gas phase" in user-facing documentation

**Issues Resolved:**

- CPHF convergence failure with COSMO solvation (required `direct` keyword in DFT block)
- NWChem scratch file cross-contamination between sequential calculations (cwd isolation fix)

**Issues Deferred:**

- None

**Technical Debt Incurred:**

- None

---

_For current project status, see .planning/PROJECT.md_
