# Milestone v2.5: ARM64 Docker Support

**Status:** âœ… SHIPPED 2026-02-04
**Phases:** 41-44
**Total Plans:** 4

## Overview

v2.5 enables native ARM64 execution for the worker container, unlocking local development on Apple Silicon Macs and deployment to ARM-based cloud instances (AWS Graviton). The roadmap progressed from creating the ARM64-specific Dockerfile using conda-forge packages, through local validation on Apple Silicon, to CI/CD integration with native ARM64 runners, culminating in documentation and release.

## Phases

### Phase 41: ARM64 Dockerfile Creation
**Goal**: ARM64 worker container exists with all computational chemistry packages installed via conda-forge.
**Depends on**: Nothing (first phase of v2.5)
**Requirements**: CONT-05
**Plans**: 1 plan

Plans:
- [x] 41-01-PLAN.md -- Create Dockerfile.worker.arm64, env-worker-arm64.yaml, and validation script

**Details:**
- Used mambaorg/micromamba:2.5.0-debian12-slim base image
- All packages from conda-forge (NWChem 7.3.1, xTB 6.7.1, CREST 3.0.2, RDKit)
- RDKit from conda (not pip) for correct C++ dependency handling
- Environment variables for OpenBLAS threading and stack size

### Phase 42: Local Validation
**Goal**: ARM64 worker container passes all computational chemistry tests on Apple Silicon.
**Depends on**: Phase 41
**Requirements**: CONT-01, CONT-02, CONT-03, CONT-04, CONT-06
**Plans**: 1 plan

Plans:
- [x] 42-01-PLAN.md -- Create validation script and test fixtures, build and validate ARM64 container on Apple Silicon

**Details:**
- Comprehensive validation script (349 lines) testing all binaries
- Test fixtures for methane (optimization, NMR) and ethanol (conformers)
- 10/10 validation tests passed on Apple Silicon
- Issues resolved: bash arithmetic, NWChem memory (2GB), CPU auto-detection

### Phase 43: CI/CD Integration
**Goal**: GitHub Actions builds and publishes multi-arch images with native ARM64 runner.
**Depends on**: Phase 42
**Requirements**: CICD-01, CICD-02, CICD-03, CICD-04
**Plans**: 1 plan

Plans:
- [x] 43-01-PLAN.md -- Update publish-images.yml with ARM64 build job and manifest merge

**Details:**
- Matrix strategy: linux/amd64 on ubuntu-latest, linux/arm64 on ubuntu-24.04-arm
- Push by digest pattern for manifest merging
- docker buildx imagetools create for multi-arch manifest
- Native ARM64 build (~3-4 min vs hours with QEMU)

### Phase 44: Documentation and Release
**Goal**: Users know ARM64 is supported and can deploy without architecture-specific instructions.
**Depends on**: Phase 43
**Requirements**: DOCS-01, DOCS-02, DOCS-03
**Plans**: 1 plan

Plans:
- [x] 44-01-PLAN.md -- Update README and deployment docs with ARM64 support

**Details:**
- README Platform Support section with ARM64/Apple Silicon callout
- Deployment guide ARM64 section with known considerations table
- docker-compose.yml verified unchanged for ARM64

---

## Milestone Summary

**Key Decisions:**
- Separate Dockerfile.worker.arm64 (not unified with build args) for clarity
- conda-forge packages for all computational chemistry tools
- micromamba base image for faster package resolution
- GitHub Actions ubuntu-24.04-arm runner for native builds
- Architecture check: warning not error (allows QEMU testing)
- NWChem memory: 2GB minimum (500MB insufficient)
- Auto-detect CPU count with 80% usage, 2GB/core memory limit, cap at 40

**Issues Resolved:**
- ARM64 builds work natively (no QEMU emulation)
- All computational chemistry tools validated on Apple Silicon
- Multi-arch manifest auto-selects correct architecture
- Local development permission handling (UID mismatch fix)

**Issues Deferred:**
- Performance benchmarking ARM64 vs x86_64 (PERF-02)
- OpenBLAS TARGET optimization for specific ARM hardware (PERF-01)

**Technical Debt Incurred:**
None

---

_For current project status, see .planning/ROADMAP.md_
